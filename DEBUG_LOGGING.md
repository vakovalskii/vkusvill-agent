# –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞

## –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ:

### 1. –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (logging_config.yaml)

```yaml
console:
  level: DEBUG  # –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—Å–µ DEBUG —Å–æ–æ–±—â–µ–Ω–∏—è

sgr_agent_core:
  level: DEBUG  # –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –∞–≥–µ–Ω—Ç–∞

sgr_agent_core.agents:
  level: DEBUG  # –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

httpx:
  level: INFO  # HTTP –∑–∞–ø—Ä–æ—Å—ã

mcp:
  level: INFO  # MCP –ø—Ä–æ—Ç–æ–∫–æ–ª
```

### 2. –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ tool_calling_agent.py

**–ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è:**

#### –ü–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º LLM (üì§):
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
- –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (preview)

```
üì§ Sending to LLM:
  Messages count: 3
  Available tools: ['vkusvill_products_search', 'vkusvill_cart_link_create', 'finalanswertool']
  Last message role: tool
  Last message preview: {"ok": true, "data": {...}}...
```

#### –ü–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ LLM (üì•):
- –ö–∞–∫–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤—ã–±—Ä–∞–ª LLM
- –° –∫–∞–∫–∏–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏

```
üì• LLM decided to call: vkusvill_cart_link_create
  With arguments: {
    "products": [
      {"xml_id": 25512, "q": 1},
      {"xml_id": 66889, "q": 1}
    ]
  }
```

#### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ (üõ†Ô∏è):
- –ù–∞–∑–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–∑–æ–≤–∞
- –†–µ–∑—É–ª—å—Ç–∞—Ç (–ø–µ—Ä–≤—ã–µ 400 —Å–∏–º–≤–æ–ª–æ–≤)

```
üõ†Ô∏è TOOL EXECUTION DEBUG:
    üîß Tool Name: vkusvill_products_search
    üìã Tool Model: {
      "q": "—Ö–ª–µ–± —Å–≤–µ–∂–∏–π",
      "page": 1,
      "sort": "popularity"
    }
    üîç Result: '{"ok": true, "data": {...}}'
```

### 3. –£–ª—É—á—à–µ–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –≤ main.py

```python
================================================================================
AGENT CONFIG:
================================================================================
{...}

================================================================================
AGENT EXECUTION:
================================================================================

[–î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –∑–¥–µ—Å—å]

================================================================================
FINAL RESULT:
================================================================================
{...}
```

## –ó–∞–ø—É—Å–∫ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏:

```bash
conda activate vkusvill
python main.py
```

## –ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ:

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**:
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - –°–æ–∑–¥–∞–Ω–∏–µ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞

2. **–ö–∞–∂–¥—ã–π —à–∞–≥ (Step N)**:
   - üì§ –ß—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è LLM
   - üì• –ß—Ç–æ —Ä–µ—à–∏–ª LLM
   - üõ†Ô∏è –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
   - –†–µ–∑—É–ª—å—Ç–∞—Ç

3. **HTTP/MCP –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**:
   - POST/GET/DELETE –∑–∞–ø—Ä–æ—Å—ã
   - –°–æ–∑–¥–∞–Ω–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ —Å–µ—Å—Å–∏–π
   - Reconnection events

4. **–§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
   - –û—Ç–≤–µ—Ç –∞–≥–µ–Ω—Ç–∞
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤

## –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Ç–æ—á–Ω–æ —É–≤–∏–¥–µ—Ç—å:
- ‚úÖ –°–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤ –¥–µ–ª–∞–µ—Ç –∞–≥–µ–Ω—Ç
- ‚úÖ –ö–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—ã–∑—ã–≤–∞–µ—Ç
- ‚úÖ –ü–æ—á–µ–º—É –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–æ—Ç –∏–ª–∏ –∏–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
- ‚úÖ –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω–∏–º–∞–µ—Ç –∫–∞–∂–¥—ã–π —à–∞–≥
- ‚úÖ –ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–∞–∂–¥—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç

## –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤:

–ï—Å–ª–∏ –ª–æ–≥–æ–≤ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ, –≤ `logging_config.yaml`:

```yaml
console:
  level: INFO  # –í–º–µ—Å—Ç–æ DEBUG

sgr_agent_core:
  level: INFO  # –í–º–µ—Å—Ç–æ DEBUG

httpx:
  level: WARNING  # –°–∫—Ä—ã—Ç—å HTTP –∑–∞–ø—Ä–æ—Å—ã

mcp:
  level: WARNING  # –°–∫—Ä—ã—Ç—å MCP –ø—Ä–æ—Ç–æ–∫–æ–ª
```

## –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:

- **–ö–æ–Ω—Å–æ–ª—å**: –í—Å–µ DEBUG/INFO –ª–æ–≥–∏
- **–§–∞–π–ª**: `logs/sgr_agent_core.log` (–¥–æ 10MB, 5 backup —Ñ–∞–π–ª–æ–≤)
- **JSON**: `logs/YYYYMMDD-HHMMSS-{agent_id}-log.json` (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏)

